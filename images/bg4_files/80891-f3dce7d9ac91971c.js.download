"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[80891],{715764:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DebugSignalsFeedback_pin",selections:[{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debAds",plural:!0,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"backgroundColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"iconUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"signalId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"signalMessage",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debContentQuality",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debInclusiveProduct",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debShopping",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debTrustAndSafety",plural:!0,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="06530ceab8fc1bb7b5d868c8ffeb2afd",n.default=i},453854:function(e,n,t){t.d(n,{q:function(){return o}});var r=t(282480);function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l,a,o=[],s=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=l.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var a=function(){var e=i((0,r.useState)(!1),2),n=e[0],t=e[1],l=i((0,r.useState)(!1),2),a=l[0],o=l[1],s=i((0,r.useState)(!1),2),c=s[0],u=s[1];return{active:n,focused:a,hovered:c,onBlur:function(){o(!1),t(!1)},onFocus:function(){return o(!0)},onMouseDown:function(){return t(!0)},onMouseEnter:function(){return u(!0)},onMouseLeave:function(){u(!1),t(!1)},onMouseUp:function(){return t(!1)}}};function o(e){return(0,e.children)(a())}n.Z=a},180891:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var r,i=t(282480);t(711284);var l=t(868073),a=t(297949),o=t(602185),s=t(384609),c=t(700337),u=t(750077),d=t(453854),h=t(383399),g=t(770443),f=function(e){var n,t=e.signal,r=e.anchor,i=e.setShowFlyout,l=e.setStore,o=(0,d.Z)(),s=o.hovered,c=o.onMouseEnter,u=o.onMouseLeave,h=function(e){i(function(e){return!e}),l(e)};return(0,g.jsx)(a.iP,{onMouseEnter:c,onMouseLeave:u,onTap:function(){return h(t)},rounding:"pill",children:(0,g.jsxs)(a.xu,{ref:r,alignItems:"center",color:s?"dark":"transparentDarkGray",display:"flex",padding:3,rounding:"pill",children:[(0,g.jsx)(a.xu,{alignItems:"center",color:"default",display:"flex",height:24,justifyContent:"center",marginEnd:1,minWidth:24,rounding:"circle",children:(0,g.jsx)(a.xu,{height:20,overflow:"hidden",rounding:"circle",width:20,children:t.iconUrl&&(0,g.jsx)(a.Ee,{alt:"",color:null!==(n=t.backgroundColor)&&void 0!==n?n:"",naturalHeight:1,naturalWidth:1,src:t.iconUrl})})}),(0,g.jsx)(a.xv,{color:"inverse",size:"200",weight:"bold",children:t.signalMessage})]})})},_=t(400416),p=t(144326),y=t(901450),x=t(476198);function v(e){var n=(0,p.ZP)(),t=e.onHide,r=(0,g.jsx)(a.xv,{children:n._('Thank you for helping improve signal detection on Pinterest!', 'pinRep.actionBar.signalDetector.toast', 'Toast text displayed when a user submits a signal for review')});return(0,g.jsx)(x.Z,{onHide:t,text:r})}var m=function(e){var n=e.anchor,t=e.onDismiss,r=e.pinId,i=e.signal,l=(0,p.ZP)(),o=(0,h.Z)(),s=(0,y.F9)().showOneToast;if(!o.isEmployee)return null;var c=i.backgroundColor,u=i.iconUrl,d=i.signalId,f=i.signalMessage;return(0,g.jsx)(a.mh,{children:(0,g.jsx)(a.J2,{anchor:n,idealDirection:"right",onDismiss:t,positionRelativeToAnchor:!1,size:"lg",children:(0,g.jsxs)(a.xu,{padding:4,width:"100%",children:[(0,g.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,g.jsx)(a.X6,{size:"400",children:l._('Signal detected:', 'pinRep.actionBar.signalDetector.header', 'Header for signal detector flyout')})}),(0,g.jsx)(a.xu,{paddingY:3,children:(0,g.jsxs)(a.kC,{alignItems:"center",gap:2,justifyContent:"center",children:[(0,g.jsx)(a.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:u?(0,g.jsx)(a.Ee,{alt:l._('Signal display', 'pinRep.actionBar.signalDetector.signalAsset', 'Asset to represent the signal detected'),color:"white",naturalHeight:1,naturalWidth:1,src:u}):(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:null!=c?c:""}},height:40,width:40})}),(0,g.jsx)(a.xv,{size:"200",children:f})]})}),(0,g.jsx)(a.xu,{marginBottom:3,children:(0,g.jsx)(a.xv,{size:"200",children:l._('If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.', 'pinRep.actionBar.signalDetector.instructions', 'Instructions to the user for how to handle inaccurate detection')})}),(0,g.jsxs)(a.kC,{alignItems:"center",gap:2,justifyContent:"start",children:[(0,g.jsx)(a.zx,{color:"red",fullWidth:!0,onClick:function(){(0,_.Z)({url:"/v3/pins/".concat(r,"/signal_request_review/"),method:"POST",data:{signal_id:d,user:o.id}}),t(),s(function(e){var n=e.hideToast;return(0,g.jsx)(v,{onHide:n})})},size:"md",text:l._('Send for review', 'pinRep.actionBar.signalDetector.button.review', 'Button label for users to send the pin for review')}),(0,g.jsx)(a.zx,{color:"gray",fullWidth:!0,onClick:t,size:"md",text:l._('Cancel', 'pinRep.actionBar.signalDetector.button.cancel', 'Button label for users to cancel')})]})]})})})};function j(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l,a,o=[],s=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=l.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return b(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function S(e){var n=e.signals,t=e.pinId,r=j((0,i.useState)(!1),2),l=r[0],s=r[1],d=(0,i.useRef)(null),h=j((0,i.useState)(n[0]),2),_=h[0],p=h[1];return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(o.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,g.jsx)(u.Z,{children:(0,g.jsx)(a.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,g.jsx)(c.Z,{children:(0,g.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",children:n.map(function(e){return(0,g.jsx)(a.xu,{marginEnd:2,children:(0,g.jsx)(f,{anchor:d,setShowFlyout:s,setStore:p,signal:e})},e.signalId)})})})})})}),l&&(0,g.jsx)(m,{anchor:d.current,onDismiss:function(){return s(!1)},pinId:t,signal:_})]})}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var I=function(e){var n,t=e.anchor,r=e.onDismiss,l=e.pinId,o=e.signals,s=(0,p.ZP)(),c=function(e){if(Array.isArray(e))return e}(n=(0,i.useState)(0))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l,a,o=[],s=!0,c=!1;try{for(l=(t=t.call(e)).next;!(s=(r=l.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(n,2)||function(e,n){if(e){if("string"==typeof e)return A(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],d=c[1],f=(0,h.Z)(),x=(0,y.F9)().showOneToast;if(!f.isEmployee)return null;var m=o.map(function(e){var n=e.signalMessage;return{href:"#",text:null!=n?n:""}}),j=o[u],b=j.backgroundColor,S=j.iconUrl,I=j.signalId,w=j.signalMessage,k=function(e){d(e.activeTabIndex)};return(0,g.jsx)(a.mh,{children:(0,g.jsx)(a.J2,{anchor:t,idealDirection:"right",onDismiss:r,positionRelativeToAnchor:!1,size:"lg",children:(0,g.jsxs)(a.xu,{padding:4,width:"100%",children:[o.length>1&&(0,g.jsx)(a.xu,{marginBottom:4,overflow:"scrollX",padding:1,children:(0,g.jsx)(a.mQ,{activeTabIndex:u,onChange:function(e){var n=e.event,t=e.activeTabIndex,r=e.dangerouslyDisableOnNavigation;n.preventDefault(),r(),k({activeTabIndex:t})},tabs:m})}),(0,g.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,g.jsx)(a.X6,{size:"400",children:s._('Signal detected:', 'pinRep.actionBar.signalDetector.header', 'Header for signal detector flyout')})}),(0,g.jsx)(a.xu,{paddingY:3,children:(0,g.jsxs)(a.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",children:[(0,g.jsx)(a.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:S?(0,g.jsx)(a.Ee,{alt:s._('Signal display', 'pinRep.actionBar.signalDetector.signalAsset', 'Asset to represent the signal detected'),color:"white",naturalHeight:1,naturalWidth:1,src:S}):(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:null!=b?b:""}},height:40,width:40})}),(0,g.jsx)(a.xv,{size:"200",children:w})]})}),(0,g.jsx)(a.xu,{marginBottom:3,children:(0,g.jsx)(a.xv,{size:"200",children:s._('If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.', 'pinRep.actionBar.signalDetector.instructions', 'Instructions to the user for how to handle inaccurate detection')})}),(0,g.jsxs)(a.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,g.jsx)(a.zx,{color:"red",fullWidth:!0,onClick:function(){(0,_.Z)({url:"/v3/pins/".concat(l,"/signal_request_review/"),method:"POST",data:{signal_id:I,user:f.id}}),r(),x(function(e){var n=e.hideToast;return(0,g.jsx)(v,{onHide:n})})},size:"md",text:s._('Send for review', 'pinRep.actionBar.signalDetector.button.review', 'Button label for users to send the pin for review')}),(0,g.jsx)(a.zx,{color:"gray",fullWidth:!0,onClick:r,size:"md",text:s._('Cancel', 'pinRep.actionBar.signalDetector.button.cancel', 'Button label for users to cancel')})]})]})})})};function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var k=void 0!==r?r:r=t(715764);function D(e){var n,t=e.signals,r=e.pinId,l=t[0],s=l.backgroundColor,h=l.iconUrl,f=l.signalMessage,_=function(e){if(Array.isArray(e))return e}(n=(0,i.useState)(!1))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l,a,o=[],s=!0,c=!1;try{for(l=(t=t.call(e)).next;!(s=(r=l.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(n,2)||function(e,n){if(e){if("string"==typeof e)return w(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=_[0],y=_[1],x=(0,i.useRef)(null);return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(o.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,g.jsx)(u.Z,{children:(0,g.jsx)(a.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,g.jsx)(c.Z,{children:(0,g.jsx)(d.q,{children:function(e){var n=e.hovered,t=e.onMouseEnter,r=e.onMouseLeave;return(0,g.jsx)(a.iP,{onMouseEnter:t,onMouseLeave:r,onTap:function(){return y(function(e){return!e})},rounding:"pill",children:(0,g.jsxs)(a.xu,{ref:x,alignItems:"center",color:n?"dark":"transparentDarkGray",display:"flex",padding:3,rounding:"pill",children:[(0,g.jsx)(a.xu,{alignItems:"center",color:"default",display:"flex",height:24,justifyContent:"center",marginEnd:1,rounding:"circle",width:24,children:(0,g.jsx)(a.xu,{height:20,overflow:"hidden",rounding:"circle",width:20,children:h&&(0,g.jsx)(a.Ee,{alt:"",color:null!=s?s:"",naturalHeight:1,naturalWidth:1,src:h})})}),(0,g.jsx)(a.xv,{color:"inverse",size:"200",weight:"bold",children:f})]})})}})})})})}),p&&x&&x.current&&(0,g.jsx)(I,{anchor:x.current,onDismiss:function(){return y(!1)},pinId:r,signals:t})]})}function z(e){var n=e.pinKey,t=(0,s.Z)(k,n),r=(0,h.Z)(),a=(0,l.TH)().search,o=(0,i.useMemo)(function(){return new URLSearchParams(a)},[a]);if(!r.isEmployee)return null;var c=t.entityId,u=t.debAds,d=t.debContentQuality,f=t.debInclusiveProduct,_=t.debShopping,p=t.debTrustAndSafety;if(u)return(0,g.jsx)(D,{pinId:c,signals:u});if(d)return(0,g.jsx)(D,{pinId:c,signals:d});if(f){if("skin_tone"===o.get("type")){var y=f.filter(function(e){return"visual_signals_hair_pattern_v1"!==e.signalId});return(0,g.jsx)(S,{pinId:c,signals:y})}var x=f.filter(function(e){return"visual_body_analyses_v2_0"!==e.signalId});return(0,g.jsx)(S,{pinId:c,signals:x})}return _?(0,g.jsx)(D,{pinId:c,signals:_}):p?(0,g.jsx)(D,{pinId:c,signals:p}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/80891-f3dce7d9ac91971c.js.map